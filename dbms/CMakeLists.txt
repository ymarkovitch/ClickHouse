include_directories (
    include
    ${MYSQL_INCLUDE_DIRS})

add_subdirectory (src)

set (DISABLE_MONGODB FALSE CACHE BOOL "Set to TRUE to disable MongoDB support as source for external dictionaries")

if ($ENV{DISABLE_MONGODB})
	set (DISABLE_MONGODB TRUE)
endif()

if (${DISABLE_MONGODB})

    add_library(mongodb_client INTERFACE)
    target_compile_definitions(mongodb_client INTERFACE DISABLE_MONGODB)

else()

    check_include_file(mongo/client/dbclient.h MONGODB_CLIENT_FOUND)
    if (NOT MONGODB_CLIENT_FOUND)
        message(FATAL_ERROR "MongoDB client not found. Install MongoDB client or disable MongoDB support with -DDISABLE_MONGODB=TRUE")
    endif()

    add_library(mongodb_client INTERFACE)
    target_link_libraries(mongodb_client INTERFACE mongoclient ssl crypto)
    target_sources(mongodb_client INTERFACE
        include/DB/Dictionaries/MongoDBBlockInputStream.h
        include/DB/Dictionaries/MongoDBDictionarySource.h)

endif()

add_library (dbms STATIC
	src/Server/OLAPAttributesMetadata.h
	src/Server/InterserverIOHTTPHandler.h
	src/Server/OLAPHTTPHandler.h
	src/Server/OLAPQueryConverter.h
	src/Server/Server.h
	src/Server/TCPHandler.h
	src/Server/HTTPHandler.h
	src/Server/OLAPQueryParser.h
	src/Server/MetricsTransmitter.h
	src/Server/UsersConfigReloader.h
	src/Server/StatusFile.h
	src/Server/ReplicasStatusHandler.h
	src/Client/InterruptListener.h
	include/DB/Functions/FunctionsLogical.h
	include/DB/Functions/FunctionsReinterpret.h
	include/DB/Functions/FunctionFactory.h
	include/DB/Functions/FunctionsArray.h
	include/DB/Functions/FunctionsDictionaries.h
	include/DB/Functions/FunctionsStringArray.h
	include/DB/Functions/FunctionsURL.h
	include/DB/Functions/FunctionsRandom.h
	include/DB/Functions/FunctionsString.h
	include/DB/Functions/FunctionsRound.h
	include/DB/Functions/FunctionsTransform.h
	include/DB/Functions/Conditional/CondException.h
	include/DB/Functions/Conditional/common.h
	include/DB/Functions/Conditional/getArrayType.h
	include/DB/Functions/Conditional/ArgsInfo.h
	include/DB/Functions/Conditional/CondSource.h
	include/DB/Functions/Conditional/NumericPerformer.h
	include/DB/Functions/Conditional/NumericEvaluator.h
	include/DB/Functions/Conditional/StringEvaluator.h
	include/DB/Functions/Conditional/ArrayEvaluator.h
	include/DB/Functions/Conditional/StringArrayEvaluator.h
	include/DB/Functions/FunctionsConditional.h
	include/DB/Functions/FunctionsArithmetic.h
	include/DB/Functions/FunctionsConversion.h
	include/DB/Functions/FunctionsCoding.h
	include/DB/Functions/FunctionsStringSearch.h
	include/DB/Functions/FunctionsVisitParam.h
	include/DB/Functions/FunctionsHigherOrder.h
	include/DB/Functions/FunctionsComparison.h
	include/DB/Functions/FunctionsHashing.h
	include/DB/Functions/FunctionsMath.h
	include/DB/Functions/FunctionsMiscellaneous.h
	include/DB/Functions/FunctionsDateTime.h
	include/DB/Functions/IFunction.h
	include/DB/Functions/FunctionsFormatting.h
	include/DB/Functions/NumberTraits.h
	include/DB/Functions/DataTypeTraits.h
	include/DB/Functions/EnrichedDataTypePtr.h
	include/DB/TableFunctions/TableFunctionRemote.h
	include/DB/TableFunctions/TableFunctionFactory.h
	include/DB/TableFunctions/TableFunctionMerge.h
	include/DB/TableFunctions/TableFunctionShardByHash.h
	include/DB/TableFunctions/ITableFunction.h
	include/DB/TableFunctions/getStructureOfRemoteTable.h
	include/DB/Parsers/ASTSetQuery.h
	include/DB/Parsers/ASTRenameQuery.h
	include/DB/Parsers/ParserQueryWithOutput.h
	include/DB/Parsers/ParserOptimizeQuery.h
	include/DB/Parsers/ParserSetQuery.h
	include/DB/Parsers/ASTCreateQuery.h
	include/DB/Parsers/ASTExpressionList.h
	include/DB/Parsers/ASTQueryWithOutput.h
	include/DB/Parsers/ParserSelectQuery.h
	include/DB/Parsers/ParserUseQuery.h
	include/DB/Parsers/ASTShowTablesQuery.h
	include/DB/Parsers/ASTFunction.h
	include/DB/Parsers/ASTSelectQuery.h
	include/DB/Parsers/ParserCreateQuery.h
	include/DB/Parsers/ASTLiteral.h
	include/DB/Parsers/ASTInsertQuery.h
	include/DB/Parsers/IParserBase.h
	include/DB/Parsers/ASTOptimizeQuery.h
	include/DB/Parsers/ASTSubquery.h
	include/DB/Parsers/ASTUseQuery.h
	include/DB/Parsers/ASTIdentifier.h
	include/DB/Parsers/ParserTablePropertiesQuery.h
	include/DB/Parsers/ParserCheckQuery.h
	include/DB/Parsers/ParserRenameQuery.h
	include/DB/Parsers/ParserInsertQuery.h
	include/DB/Parsers/ParserAlterQuery.h
	include/DB/Parsers/ASTWithAlias.h
	include/DB/Parsers/ASTOrderByElement.h
	include/DB/Parsers/queryToString.h
	include/DB/Parsers/ASTShowProcesslistQuery.h
	include/DB/Parsers/IAST.h
	include/DB/Parsers/ASTNameTypePair.h
	include/DB/Parsers/ASTSet.h
	include/DB/Parsers/ExpressionListParsers.h
	include/DB/Parsers/ParserQuery.h
	include/DB/Parsers/TablePropertiesQueriesASTs.h
	include/DB/Parsers/ParserDropQuery.h
	include/DB/Parsers/StringRange.h
	include/DB/Parsers/ASTAlterQuery.h
	include/DB/Parsers/CommonParsers.h
	include/DB/Parsers/formatAST.h
	include/DB/Parsers/ASTDropQuery.h
	include/DB/Parsers/ASTAsterisk.h
	include/DB/Parsers/ASTCheckQuery.h
	include/DB/Parsers/ASTColumnDeclaration.h
	include/DB/Parsers/ASTEnumElement.h
	include/DB/Parsers/parseQuery.h
	include/DB/Parsers/ParserShowProcesslistQuery.h
	include/DB/Parsers/ParserShowTablesQuery.h
	include/DB/Parsers/ParserEnumElement.h
	include/DB/Parsers/ExpressionElementParsers.h
	include/DB/Parsers/ASTQueryWithTableAndOutput.h
	include/DB/Parsers/IParser.h
	include/DB/Parsers/ASTSampleRatio.h
	include/DB/Parsers/ParserSampleRatio.h
	include/DB/Parsers/ParserCase.h
	include/DB/Parsers/ASTTablesInSelectQuery.h
	include/DB/Parsers/ParserTablesInSelectQuery.h
	include/DB/AggregateFunctions/AggregateFunctionMerge.h
	include/DB/AggregateFunctions/AggregateFunctionUniqUpTo.h
	include/DB/AggregateFunctions/AggregateFunctionIf.h
	include/DB/AggregateFunctions/AggregateFunctionsArgMinMax.h
	include/DB/AggregateFunctions/AggregateFunctionGroupArray.h
	include/DB/AggregateFunctions/AggregateFunctionQuantileDeterministic.h
	include/DB/AggregateFunctions/AggregateFunctionUniq.h
	include/DB/AggregateFunctions/UniqVariadicHash.h
	include/DB/AggregateFunctions/AggregateFunctionsStatistics.h
	include/DB/AggregateFunctions/AggregateFunctionAvg.h
	include/DB/AggregateFunctions/AggregateFunctionQuantile.h
	include/DB/AggregateFunctions/AggregateFunctionQuantileExact.h
	include/DB/AggregateFunctions/AggregateFunctionQuantileExactWeighted.h
	include/DB/AggregateFunctions/AggregateFunctionQuantileTiming.h
	include/DB/AggregateFunctions/AggregateFunctionQuantileTDigest.h
	include/DB/AggregateFunctions/IBinaryAggregateFunction.h
	include/DB/AggregateFunctions/AggregateFunctionState.h
	include/DB/AggregateFunctions/AggregateFunctionSequenceMatch.h
	include/DB/AggregateFunctions/IUnaryAggregateFunction.h
	include/DB/AggregateFunctions/IAggregateFunction.h
	include/DB/AggregateFunctions/AggregateFunctionsMinMaxAny.h
	include/DB/AggregateFunctions/INullaryAggregateFunction.h
	include/DB/AggregateFunctions/AggregateFunctionGroupUniqArray.h
	include/DB/AggregateFunctions/AggregateFunctionArray.h
	include/DB/AggregateFunctions/AggregateFunctionCount.h
	include/DB/AggregateFunctions/AggregateFunctionSum.h
	include/DB/AggregateFunctions/AggregateFunctionFactory.h
	include/DB/AggregateFunctions/Helpers.h
	include/DB/AggregateFunctions/HelpersMinMaxAny.h
	include/DB/AggregateFunctions/UniqCombinedBiasData.h
	include/DB/AggregateFunctions/ReservoirSampler.h
	include/DB/AggregateFunctions/ReservoirSamplerDeterministic.h
	include/DB/AggregateFunctions/UniquesHashSet.h
	include/DB/AggregateFunctions/QuantilesCommon.h
	include/DB/Core/BlockInfo.h
	include/DB/Core/SortDescription.h
	include/DB/Core/Protocol.h
	include/DB/Core/Row.h
	include/DB/Core/ColumnNumbers.h
	include/DB/Core/ColumnsWithTypeAndName.h
	include/DB/Core/QueryProcessingStage.h
	include/DB/Core/Field.h
	include/DB/Core/FieldVisitors.h
	include/DB/Core/ColumnWithTypeAndName.h
	include/DB/Core/NamesAndTypes.h
	include/DB/Core/Names.h
	include/DB/Core/Block.h
	include/DB/Core/Defines.h
	include/DB/Core/Progress.h
	include/DB/Core/toField.h
	include/DB/Core/Types.h
	include/DB/Core/StringRef.h
	include/DB/DataStreams/NullAndDoCopyBlockInputStream.h
	include/DB/DataStreams/TabSeparatedRowInputStream.h
	include/DB/DataStreams/OneBlockInputStream.h
	include/DB/DataStreams/BlocksListBlockInputStream.h
	include/DB/DataStreams/IRowInputStream.h
	include/DB/DataStreams/TotalsHavingBlockInputStream.h
	include/DB/DataStreams/BinaryRowOutputStream.h
	include/DB/DataStreams/IRowOutputStream.h
	include/DB/DataStreams/ParallelAggregatingBlockInputStream.h
	include/DB/DataStreams/NullBlockInputStream.h
	include/DB/DataStreams/PrettyBlockOutputStream.h
	include/DB/DataStreams/BlockStreamProfileInfo.h
	include/DB/DataStreams/ConcatBlockInputStream.h
	include/DB/DataStreams/ProhibitColumnsBlockOutputStream.h
	include/DB/DataStreams/UnionBlockInputStream.h
	include/DB/DataStreams/EmptyBlockOutputStream.h
	include/DB/DataStreams/PushingToViewsBlockOutputStream.h
	include/DB/DataStreams/glueBlockInputStreams.h
	include/DB/DataStreams/CollapsingSortedBlockInputStream.h
	include/DB/DataStreams/IBlockOutputStream.h
	include/DB/DataStreams/AsynchronousBlockInputStream.h
	include/DB/DataStreams/MaterializingBlockInputStream.h
	include/DB/DataStreams/ParallelInputsProcessor.h
	include/DB/DataStreams/RemoveColumnsBlockInputStream.h
	include/DB/DataStreams/RemoteBlockInputStream.h
	include/DB/DataStreams/MaterializingBlockOutputStream.h
	include/DB/DataStreams/ForkBlockInputStreams.h
	include/DB/DataStreams/CollapsingFinalBlockInputStream.h
	include/DB/DataStreams/TabSeparatedRawRowOutputStream.h
	include/DB/DataStreams/FilterBlockInputStream.h
	include/DB/DataStreams/ValuesRowOutputStream.h
	include/DB/DataStreams/NativeBlockInputStream.h
	include/DB/DataStreams/FormatFactory.h
	include/DB/DataStreams/MergingAggregatedBlockInputStream.h
	include/DB/DataStreams/MergingAggregatedMemoryEfficientBlockInputStream.h
	include/DB/DataStreams/SummingSortedBlockInputStream.h
	include/DB/DataStreams/ReplacingSortedBlockInputStream.h
	include/DB/DataStreams/GraphiteRollupSortedBlockInputStream.h
	include/DB/DataStreams/AddingConstColumnBlockInputStream.h
	include/DB/DataStreams/DistinctBlockInputStream.h
	include/DB/DataStreams/BlockOutputStreamFromRowOutputStream.h
	include/DB/DataStreams/copyData.h
	include/DB/DataStreams/IBlockInputStream.h
	include/DB/DataStreams/TabSeparatedRowOutputStream.h
	include/DB/DataStreams/ValuesRowInputStream.h
	include/DB/DataStreams/BlockIO.h
	include/DB/DataStreams/QueueBlockIOStream.h
	include/DB/DataStreams/VerticalRowOutputStream.h
	include/DB/DataStreams/AggregatingSortedBlockInputStream.h
	include/DB/DataStreams/TabSeparatedBlockOutputStream.h
	include/DB/DataStreams/narrowBlockInputStreams.h
	include/DB/DataStreams/IProfilingBlockInputStream.h
	include/DB/DataStreams/NativeBlockOutputStream.h
	include/DB/DataStreams/RemoteBlockOutputStream.h
	include/DB/DataStreams/MergingSortedBlockInputStream.h
	include/DB/DataStreams/JSONRowOutputStream.h
	include/DB/DataStreams/JSONEachRowRowOutputStream.h
	include/DB/DataStreams/JSONEachRowRowInputStream.h
	include/DB/DataStreams/XMLRowOutputStream.h
	include/DB/DataStreams/TSKVRowOutputStream.h
	include/DB/DataStreams/TSKVRowInputStream.h
	include/DB/DataStreams/ODBCDriverBlockOutputStream.h
	include/DB/DataStreams/MergeSortingBlockInputStream.h
	include/DB/DataStreams/ExpressionBlockInputStream.h
	include/DB/DataStreams/BinaryRowInputStream.h
	include/DB/DataStreams/PrettyCompactMonoBlockOutputStream.h
	include/DB/DataStreams/AggregatingBlockInputStream.h
	include/DB/DataStreams/AddingDefaultBlockInputStream.h
	include/DB/DataStreams/PrettySpaceBlockOutputStream.h
	include/DB/DataStreams/PrettyCompactBlockOutputStream.h
	include/DB/DataStreams/CreatingSetsBlockInputStream.h
	include/DB/DataStreams/LimitBlockInputStream.h
	include/DB/DataStreams/LazyBlockInputStream.h
	include/DB/DataStreams/BlockInputStreamFromRowInputStream.h
	include/DB/DataStreams/NullBlockOutputStream.h
	include/DB/DataStreams/AddingDefaultBlockOutputStream.h
	include/DB/DataStreams/JSONCompactRowOutputStream.h
	include/DB/DataStreams/PartialSortingBlockInputStream.h
	include/DB/DataStreams/MarkInCompressedFile.h
	include/DB/DataStreams/CSVRowOutputStream.h
	include/DB/DataStreams/CSVRowInputStream.h
	include/DB/DataStreams/verbosePrintString.h
	include/DB/DataStreams/SquashingTransform.h
	include/DB/DataStreams/SquashingBlockInputStream.h
	include/DB/DataStreams/SquashingBlockOutputStream.h
	include/DB/DataTypes/IDataType.h
	include/DB/DataTypes/IDataTypeDummy.h
	include/DB/DataTypes/DataTypeSet.h
	include/DB/DataTypes/DataTypeFixedString.h
	include/DB/DataTypes/DataTypeEnum.h
	include/DB/DataTypes/DataTypeArray.h
	include/DB/DataTypes/DataTypeString.h
	include/DB/DataTypes/IDataTypeNumber.h
	include/DB/DataTypes/DataTypeFactory.h
	include/DB/DataTypes/DataTypeDate.h
	include/DB/DataTypes/FieldToDataType.h
	include/DB/DataTypes/DataTypeAggregateFunction.h
	include/DB/DataTypes/IDataTypeNumberFixed.h
	include/DB/DataTypes/DataTypeNested.h
	include/DB/DataTypes/DataTypeTuple.h
	include/DB/DataTypes/DataTypeExpression.h
	include/DB/DataTypes/DataTypeDateTime.h
	include/DB/DataTypes/DataTypesNumberFixed.h
	include/DB/Dictionaries/FileDictionarySource.h
	include/DB/Dictionaries/DictionarySourceFactory.h
	include/DB/Dictionaries/DictionaryStructure.h
	include/DB/Dictionaries/ClickHouseDictionarySource.h
	include/DB/Dictionaries/DictionaryFactory.h
	include/DB/Dictionaries/IDictionary.h
	include/DB/Dictionaries/MySQLBlockInputStream.h
	include/DB/Dictionaries/MySQLDictionarySource.h
	include/DB/Dictionaries/ODBCBlockInputStream.h
	include/DB/Dictionaries/ODBCDictionarySource.h
	include/DB/Dictionaries/TypeCheckingBlockInputStream.h
	include/DB/Dictionaries/HashedDictionary.h
	include/DB/Dictionaries/FlatDictionary.h
	include/DB/Dictionaries/ComplexKeyHashedDictionary.h
	include/DB/Dictionaries/ComplexKeyCacheDictionary.h
	include/DB/Dictionaries/IDictionarySource.h
	include/DB/Dictionaries/OwningBufferBlockInputStream.h
	include/DB/Dictionaries/CacheDictionary.h
	include/DB/Dictionaries/MySQLDictionarySource.h
	include/DB/Dictionaries/RangeHashedDictionary.h
	include/DB/Dictionaries/writeParenthesisedString.h
	include/DB/Dictionaries/Embedded/RegionsHierarchy.h
	include/DB/Dictionaries/Embedded/RegionsHierarchies.h
	include/DB/Dictionaries/Embedded/RegionsNames.h
	include/DB/Dictionaries/Embedded/TechDataHierarchy.h
	include/DB/Dictionaries/ExternalResultDescription.h
	include/DB/Dictionaries/ExternalQueryBuilder.h
	include/DB/Interpreters/InterpreterAlterQuery.h
	include/DB/Interpreters/AggregationCommon.h
	include/DB/Interpreters/ProcessList.h
	include/DB/Interpreters/AggregateDescription.h
	include/DB/Interpreters/reinterpretAsIdentifier.h
	include/DB/Interpreters/Cluster.h
	include/DB/Interpreters/loadMetadata.h
	include/DB/Interpreters/ExternalDictionaries.h
	include/DB/Interpreters/sortBlock.h
	include/DB/Interpreters/SettingsCommon.h
	include/DB/Interpreters/SpecializedAggregator.h
	include/DB/Interpreters/InterpreterShowTablesQuery.h
	include/DB/Interpreters/InterpreterUseQuery.h
	include/DB/Interpreters/Context.h
	include/DB/Interpreters/IInterpreter.h
	include/DB/Interpreters/InterpreterFactory.h
	include/DB/Interpreters/InterpreterOptimizeQuery.h
	include/DB/Interpreters/InterpreterSetQuery.h
	include/DB/Interpreters/Dictionaries.h
	include/DB/Interpreters/Settings.h
	include/DB/Interpreters/Set.h
	include/DB/Interpreters/InterpreterDescribeQuery.h
	include/DB/Interpreters/InterpreterCreateQuery.h
	include/DB/Interpreters/InterpreterShowCreateQuery.h
	include/DB/Interpreters/Users.h
	include/DB/Interpreters/Compiler.h
	include/DB/Interpreters/InJoinSubqueriesPreprocessor.h
	include/DB/Interpreters/LogicalExpressionsOptimizer.h
	include/DB/Interpreters/InterserverIOHandler.h
	include/DB/Interpreters/evaluateMissingDefaults.h
	include/DB/Interpreters/evaluateConstantExpression.h
	include/DB/Interpreters/convertFieldToType.h
	include/DB/Interpreters/ExpressionActions.h
	include/DB/Interpreters/InterpreterRenameQuery.h
	include/DB/Interpreters/Join.h
	include/DB/Interpreters/Quota.h
	include/DB/Interpreters/InterpreterExistsQuery.h
	include/DB/Interpreters/InterpreterCheckQuery.h
	include/DB/Interpreters/InterpreterInsertQuery.h
	include/DB/Interpreters/Limits.h
	include/DB/Interpreters/InterpreterDropQuery.h
	include/DB/Interpreters/InterpreterShowProcesslistQuery.h
	include/DB/Interpreters/executeQuery.h
	include/DB/Interpreters/Aggregator.h
	include/DB/Interpreters/ExpressionAnalyzer.h
	include/DB/Interpreters/InterpreterSelectQuery.h
	include/DB/Interpreters/QueryPriorities.h
	include/DB/Interpreters/QueryLog.h
	include/DB/Interpreters/getClusterName.h
	include/DB/Interpreters/ClusterProxy/IQueryConstructor.h
	include/DB/Interpreters/ClusterProxy/SelectQueryConstructor.h
	include/DB/Interpreters/ClusterProxy/DescribeQueryConstructor.h
	include/DB/Interpreters/ClusterProxy/AlterQueryConstructor.h
	include/DB/Interpreters/ClusterProxy/Query.h
	include/DB/Common/Allocator.h
	include/DB/Common/CombinedCardinalityEstimator.h
	include/DB/Common/ExternalTable.h
	include/DB/Common/PODArray.h
	include/DB/Common/Arena.h
	include/DB/Common/ArenaWithFreeLists.h
	include/DB/Common/SmallObjectPool.h
	include/DB/Common/HashTable/Hash.h
	include/DB/Common/HashTable/TwoLevelHashTable.h
	include/DB/Common/HashTable/ClearableHashSet.h
	include/DB/Common/HashTable/ClearableHashMap.h
	include/DB/Common/HashTable/TwoLevelHashMap.h
	include/DB/Common/HashTable/HashTable.h
	include/DB/Common/HashTable/HashTableAllocator.h
	include/DB/Common/HashTable/HashSet.h
	include/DB/Common/HashTable/SmallTable.h
	include/DB/Common/HashTable/HashMap.h
	include/DB/Common/SipHash.h
	include/DB/Common/getFQDNOrHostName.h
	include/DB/Common/LRUCache.h
	include/DB/Common/Throttler.h
	include/DB/Common/FileChecker.h
	include/DB/Common/ConcurrentBoundedQueue.h
	include/DB/Common/localBackup.h
	include/DB/Common/UnicodeBar.h
	include/DB/Common/Collator.h
	include/DB/Common/isLocalAddress.h
	include/DB/Common/AutoArray.h
	include/DB/Common/UInt128.h
	include/DB/Common/UTF8Helpers.h
	include/DB/Common/Macros.h
	include/DB/Common/typeid_cast.h
	include/DB/Common/ProfileEvents.h
	include/DB/Common/CurrentMetrics.h
	include/DB/Common/formatReadable.h
	include/DB/Common/VirtualColumnUtils.h
	include/DB/Common/HyperLogLogWithSmallSetOptimization.h
	include/DB/Common/Volnitsky.h
	include/DB/Common/MemoryTracker.h
	include/DB/Common/escapeForFileName.h
	include/DB/Common/setThreadName.h
	include/DB/Common/StringSearcher.h
	include/DB/Common/SimpleCache.h
	include/DB/Common/Stopwatch.h
	include/DB/Common/AIO.h
	include/DB/Common/CounterInFile.h
	include/DB/Common/HyperLogLogCounter.h
	include/DB/Common/Increment.h
	include/DB/Common/OptimizedRegularExpression.h
	include/DB/Common/OptimizedRegularExpression.inl
	include/DB/Common/StackTrace.h
	include/DB/Common/ConfigProcessor.h
	include/DB/Common/Exception.h
	include/DB/Common/HTMLForm.h
	include/DB/Common/NetException.h
	include/DB/Common/PoolBase.h
	include/DB/Common/PoolWithFailoverBase.h
	include/DB/Common/RadixSort.h
	include/DB/Common/ShellCommand.h
	include/DB/Common/getNumberOfPhysicalCPUCores.h
	include/DB/Common/BitHelpers.h
	include/DB/Common/BlockFilterCreator.h
	include/DB/Common/StringUtils.h
	include/DB/IO/CompressedStream.h
	include/DB/IO/ReadBufferFromFileDescriptor.h
	include/DB/IO/CompressedWriteBuffer.h
	include/DB/IO/CompressedReadBuffer.h
	include/DB/IO/ReadBufferFromFile.h
	include/DB/IO/CompressedReadBufferFromFile.h
	include/DB/IO/WriteBufferFromString.h
	include/DB/IO/DoubleConverter.h
	include/DB/IO/BufferWithOwnMemory.h
	include/DB/IO/WriteHelpers.h
	include/DB/IO/ConcatReadBuffer.h
	include/DB/IO/createWriteBufferFromFileBase.h
	include/DB/IO/WriteBufferFromOStream.h
	include/DB/IO/ReadBuffer.h
	include/DB/IO/WriteBufferFromVector.h
	include/DB/IO/ReadBufferFromFileBase.h
	include/DB/IO/ReadBufferFromPocoSocket.h
	include/DB/IO/RemoteReadBuffer.h
	include/DB/IO/HashingWriteBuffer.h
	include/DB/IO/ReadBufferFromString.h
	include/DB/IO/CompressedReadBufferBase.h
	include/DB/IO/WriteBufferAIO.h
	include/DB/IO/HashingReadBuffer.h
	include/DB/IO/Operators.h
	include/DB/IO/WriteBufferFromFile.h
	include/DB/IO/RemoteWriteBuffer.h
	include/DB/IO/VarInt.h
	include/DB/IO/copyData.h
	include/DB/IO/ChunkedReadBuffer.h
	include/DB/IO/LimitReadBuffer.h
	include/DB/IO/HexWriteBuffer.h
	include/DB/IO/CachedCompressedReadBuffer.h
	include/DB/IO/BufferBase.h
	include/DB/IO/AsynchronousWriteBuffer.h
	include/DB/IO/ReadBufferAIO.h
	include/DB/IO/ReadHelpers.h
	include/DB/IO/ChunkedWriteBuffer.h
	include/DB/IO/WriteBufferFromPocoSocket.h
	include/DB/IO/ReadBufferFromHTTP.h
	include/DB/IO/WriteBufferFromHTTPServerResponse.h
	include/DB/IO/createReadBufferFromFileBase.h
	include/DB/IO/WriteIntText.h
	include/DB/IO/WriteBufferFromFileDescriptor.h
	include/DB/IO/WriteBufferValidUTF8.h
	include/DB/IO/WriteBuffer.h
	include/DB/IO/WriteBufferFromFileBase.h
	include/DB/IO/ReadBufferFromIStream.h
	include/DB/IO/UncompressedCache.h
	include/DB/IO/InterserverWriteBuffer.h
	include/DB/Columns/ColumnTuple.h
	include/DB/Columns/ColumnVector.h
	include/DB/Columns/IColumnDummy.h
	include/DB/Columns/ColumnAggregateFunction.h
	include/DB/Columns/ColumnString.h
	include/DB/Columns/ColumnExpression.h
	include/DB/Columns/ColumnFixedString.h
	include/DB/Columns/ColumnConst.h
	include/DB/Columns/IColumn.h
	include/DB/Columns/ColumnsCommon.h
	include/DB/Columns/ColumnSet.h
	include/DB/Columns/ColumnArray.h
	include/DB/Columns/ColumnsNumber.h
	include/DB/Client/MultiplexedConnections.h
	include/DB/Client/ConnectionPoolWithFailover.h
	include/DB/Client/Connection.h
	include/DB/Client/ConnectionPool.h
	include/DB/Storages/StorageBuffer.h
	include/DB/Storages/StorageMemory.h
	include/DB/Storages/System/StorageSystemProcesses.h
	include/DB/Storages/System/StorageSystemDictionaries.h
	include/DB/Storages/StorageDistributed.h
	include/DB/Storages/StorageJoin.h
	include/DB/Storages/System/StorageSystemDatabases.h
	include/DB/Storages/Distributed/DirectoryMonitor.h
	include/DB/Storages/Distributed/DistributedBlockOutputStream.h
	include/DB/Storages/System/StorageSystemClusters.h
	include/DB/Storages/System/StorageSystemZooKeeper.h
	include/DB/Storages/StorageMerge.h
	include/DB/Storages/System/StorageSystemOne.h
	include/DB/Storages/AlterCommands.h
	include/DB/Storages/System/StorageSystemFunctions.h
	include/DB/Storages/StorageLog.h
	include/DB/Storages/IStorage.h
	include/DB/Storages/ColumnsDescription.h
	include/DB/Storages/System/StorageSystemMerges.h
	include/DB/Storages/VirtualColumnFactory.h
	include/DB/Storages/StorageReplicatedMergeTree.h
	include/DB/Storages/StorageFactory.h
	include/DB/Storages/MarkCache.h
	include/DB/Storages/System/StorageSystemReplicas.h
	include/DB/Storages/System/StorageSystemReplicationQueue.h
	include/DB/Storages/System/StorageSystemNumbers.h
	include/DB/Storages/System/StorageSystemParts.h
	include/DB/Storages/StorageSet.h
	include/DB/Storages/CompressionMethodSelector.h
	include/DB/Storages/ColumnDefault.h
	include/DB/Storages/ITableDeclaration.h
	include/DB/Storages/StorageView.h
	include/DB/Storages/System/StorageSystemColumns.h
	include/DB/Storages/StorageMergeTree.h
	include/DB/Storages/StorageMaterializedView.h
	include/DB/Storages/StorageTinyLog.h
	include/DB/Storages/StorageStripeLog.h
	include/DB/Storages/System/StorageSystemEvents.h
	include/DB/Storages/System/StorageSystemMetrics.h
	include/DB/Storages/System/StorageSystemTables.h
	include/DB/Storages/MergeTree/MarkRange.h
	include/DB/Storages/MergeTree/MergeTreeDataMerger.h
	include/DB/Storages/MergeTree/MergedBlockOutputStream.h
	include/DB/Storages/MergeTree/ReplicatedMergeTreeRestartingThread.h
	include/DB/Storages/MergeTree/ReplicatedMergeTreePartCheckThread.h
	include/DB/Storages/MergeTree/ReplicatedMergeTreeAlterThread.h
	include/DB/Storages/MergeTree/BoolMask.h
	include/DB/Storages/MergeTree/BackgroundProcessingPool.h
	include/DB/Storages/MergeTree/MergeTreeDataSelectExecutor.h
	include/DB/Storages/MergeTree/ActiveDataPartSet.h
	include/DB/Storages/MergeTree/MergeTreeWhereOptimizer.h
	include/DB/Storages/MergeTree/RangesInDataPart.h
	include/DB/Storages/MergeTree/MergeTreeReadPool.h
	include/DB/Storages/MergeTree/ReplicatedMergeTreeLogEntry.h
	include/DB/Storages/MergeTree/ReplicatedMergeTreeQueue.h
	include/DB/Storages/MergeTree/MergeList.h
	include/DB/Storages/MergeTree/PKCondition.h
	include/DB/Storages/MergeTree/MergeTreeDataWriter.h
	include/DB/Storages/MergeTree/ReplicatedMergeTreeCleanupThread.h
	include/DB/Storages/MergeTree/AbandonableLockInZooKeeper.h
	include/DB/Storages/MergeTree/ReplicatedMergeTreeBlockOutputStream.h
	include/DB/Storages/MergeTree/MergeTreePartChecker.h
	include/DB/Storages/MergeTree/MergeTreeBlockInputStream.h
	include/DB/Storages/MergeTree/MergeTreeBlockOutputStream.h
	include/DB/Storages/MergeTree/MergeTreeThreadBlockInputStream.h
	include/DB/Storages/MergeTree/DiskSpaceMonitor.h
	include/DB/Storages/MergeTree/RemoteDiskSpaceMonitor.h
	include/DB/Storages/MergeTree/MergeTreeReader.h
	include/DB/Storages/MergeTree/DataPartsExchange.h
	include/DB/Storages/MergeTree/ReplicatedMergeTreeQuorumEntry.h
	include/DB/Storages/MergeTree/MergeTreeData.h
	include/DB/Storages/MergeTree/MergeTreeDataPart.h
	include/DB/Storages/MergeTree/MergeTreeSettings.h
	include/DB/Storages/MergeTree/ReshardingJob.h
	include/DB/Storages/MergeTree/ReshardingWorker.h
	include/DB/Storages/MergeTree/MergeTreeSharder.h
	include/DB/Storages/MergeTree/ShardedPartitionUploader.h
	include/DB/Storages/MergeTree/RemoteQueryExecutor.h
	include/DB/Storages/MergeTree/RemotePartChecker.h
	include/DB/Storages/StorageNull.h
	include/DB/Storages/System/StorageSystemSettings.h
	include/DB/Databases/IDatabase.h
	include/DB/Databases/DatabaseOrdinary.h
	include/DB/Databases/DatabaseCloud.h
	include/DB/Databases/DatabaseFactory.h
	include/DB/Databases/DatabasesCommon.h

	src/Common/ProfileEvents.cpp
	src/Common/CurrentMetrics.cpp
	src/Common/VirtualColumnUtils.cpp
	src/Common/MemoryTracker.cpp
	src/Common/Macros.cpp
	src/Common/formatReadable.cpp
	src/Common/localBackup.cpp
	src/Common/getFQDNOrHostName.cpp
	src/Common/setThreadName.cpp
	src/Common/FileChecker.cpp
	src/Common/StackTrace.cpp
	src/Common/ConfigProcessor.cpp
	src/Common/Exception.cpp
	src/Common/ShellCommand.cpp
	src/Common/isLocalAddress.cpp
	src/Common/getNumberOfPhysicalCPUCores.cpp
	src/Common/StringUtils.cpp

	src/Core/Field.cpp
	src/Core/FieldVisitors.cpp
	src/Core/Block.cpp
	src/Core/BlockInfo.cpp
	src/Core/NamesAndTypes.cpp
	src/Core/ErrorCodes.cpp

	src/IO/ReadHelpers.cpp
	src/IO/WriteHelpers.cpp
	src/IO/WriteBufferValidUTF8.cpp
	src/IO/copyData.cpp
	src/IO/ReadBufferFromPocoSocket.cpp
	src/IO/WriteBufferFromPocoSocket.cpp
	src/IO/HashingWriteBuffer.cpp
	src/IO/ReadBufferAIO.cpp
	src/IO/WriteBufferAIO.cpp
	src/IO/createReadBufferFromFileBase.cpp
	src/IO/createWriteBufferFromFileBase.cpp
	src/IO/ReadBufferFromFileBase.cpp
	src/IO/WriteBufferFromFileBase.cpp
	src/IO/InterserverWriteBuffer.cpp

	src/Columns/ColumnConst.cpp
	src/Columns/ColumnArray.cpp
	src/Columns/ColumnAggregateFunction.cpp
	src/Columns/ColumnExpression.cpp
	src/Columns/ColumnsCommon.cpp

	src/Storages/StorageMaterializedView.cpp
	src/Storages/StorageView.cpp
	src/Storages/System/StorageSystemNumbers.cpp
	src/Storages/System/StorageSystemOne.cpp
	src/Storages/System/StorageSystemTables.cpp
	src/Storages/System/StorageSystemParts.cpp
	src/Storages/System/StorageSystemDatabases.cpp
	src/Storages/System/StorageSystemProcesses.cpp
	src/Storages/System/StorageSystemEvents.cpp
	src/Storages/System/StorageSystemMetrics.cpp
	src/Storages/System/StorageSystemMerges.cpp
	src/Storages/System/StorageSystemSettings.cpp
	src/Storages/System/StorageSystemZooKeeper.cpp
	src/Storages/System/StorageSystemReplicas.cpp
	src/Storages/System/StorageSystemReplicationQueue.cpp
	src/Storages/System/StorageSystemDictionaries.cpp
	src/Storages/System/StorageSystemColumns.cpp
	src/Storages/System/StorageSystemFunctions.cpp
	src/Storages/System/StorageSystemClusters.cpp
	src/Storages/StorageLog.cpp
	src/Storages/StorageTinyLog.cpp
	src/Storages/StorageStripeLog.cpp
	src/Storages/StorageMemory.cpp
	src/Storages/StorageBuffer.cpp
	src/Storages/StorageFactory.cpp
	src/Storages/StorageDistributed.cpp
	src/Storages/StorageMerge.cpp
	src/Storages/StorageMergeTree.cpp
	src/Storages/StorageReplicatedMergeTree.cpp
	src/Storages/StorageSet.cpp
	src/Storages/StorageJoin.cpp
	src/Storages/VirtualColumnFactory.cpp
	src/Storages/Distributed/DistributedBlockOutputStream.cpp
	src/Storages/MergeTree/PKCondition.cpp
	src/Storages/MergeTree/DiskSpaceMonitor.cpp
	src/Storages/MergeTree/RemoteDiskSpaceMonitor.cpp
	src/Storages/MergeTree/ActiveDataPartSet.cpp
	src/Storages/MergeTree/BackgroundProcessingPool.cpp
	src/Storages/MergeTree/MergeTreeData.cpp
	src/Storages/MergeTree/MergeTreeDataPart.cpp
	src/Storages/MergeTree/MergeTreeDataSelectExecutor.cpp
	src/Storages/MergeTree/MergeTreeDataWriter.cpp
	src/Storages/MergeTree/MergeTreeDataMerger.cpp
	src/Storages/MergeTree/MergeTreePartChecker.cpp
	src/Storages/MergeTree/ReplicatedMergeTreeLogEntry.cpp
	src/Storages/MergeTree/ReplicatedMergeTreeQueue.cpp
	src/Storages/MergeTree/DataPartsExchange.cpp
	src/Storages/MergeTree/ReplicatedMergeTreeRestartingThread.cpp
	src/Storages/MergeTree/ReplicatedMergeTreePartCheckThread.cpp
	src/Storages/MergeTree/ReplicatedMergeTreeCleanupThread.cpp
	src/Storages/MergeTree/ReplicatedMergeTreeAlterThread.cpp
	src/Storages/MergeTree/ReshardingJob.cpp
	src/Storages/MergeTree/ReshardingWorker.cpp
	src/Storages/MergeTree/MergeTreeSharder.cpp
	src/Storages/MergeTree/ShardedPartitionUploader.cpp
	src/Storages/MergeTree/RemoteQueryExecutor.cpp
	src/Storages/MergeTree/RemotePartChecker.cpp
	src/Storages/MergeTree/ReplicatedMergeTreeBlockOutputStream.cpp
	src/Storages/ITableDeclaration.cpp
	src/Storages/AlterCommands.cpp
	src/Storages/ColumnsDescription.cpp

	src/DataStreams/AggregatingSortedBlockInputStream.cpp
	src/DataStreams/IRowOutputStream.cpp
	src/DataStreams/IBlockInputStream.cpp
	src/DataStreams/IProfilingBlockInputStream.cpp
	src/DataStreams/BlockStreamProfileInfo.cpp
	src/DataStreams/BlockInputStreamFromRowInputStream.cpp
	src/DataStreams/BlockOutputStreamFromRowOutputStream.cpp
	src/DataStreams/TabSeparatedRowInputStream.cpp
	src/DataStreams/TabSeparatedRowOutputStream.cpp
	src/DataStreams/BinaryRowInputStream.cpp
	src/DataStreams/BinaryRowOutputStream.cpp
	src/DataStreams/ValuesRowInputStream.cpp
	src/DataStreams/ValuesRowOutputStream.cpp
	src/DataStreams/TabSeparatedBlockOutputStream.cpp
	src/DataStreams/NativeBlockInputStream.cpp
	src/DataStreams/NativeBlockOutputStream.cpp
	src/DataStreams/LimitBlockInputStream.cpp
	src/DataStreams/FilterBlockInputStream.cpp
	src/DataStreams/PartialSortingBlockInputStream.cpp
	src/DataStreams/MergeSortingBlockInputStream.cpp
	src/DataStreams/AggregatingBlockInputStream.cpp
	src/DataStreams/PrettyBlockOutputStream.cpp
	src/DataStreams/PrettyCompactBlockOutputStream.cpp
	src/DataStreams/PrettySpaceBlockOutputStream.cpp
	src/DataStreams/VerticalRowOutputStream.cpp
	src/DataStreams/MergingAggregatedBlockInputStream.cpp
	src/DataStreams/MergingAggregatedMemoryEfficientBlockInputStream.cpp
	src/DataStreams/MergingSortedBlockInputStream.cpp
	src/DataStreams/CollapsingSortedBlockInputStream.cpp
	src/DataStreams/CollapsingFinalBlockInputStream.cpp
	src/DataStreams/ExpressionBlockInputStream.cpp
	src/DataStreams/narrowBlockInputStreams.cpp
	src/DataStreams/glueBlockInputStreams.cpp
	src/DataStreams/FormatFactory.cpp
	src/DataStreams/copyData.cpp
	src/DataStreams/JSONRowOutputStream.cpp
	src/DataStreams/JSONEachRowRowOutputStream.cpp
	src/DataStreams/JSONEachRowRowInputStream.cpp
	src/DataStreams/XMLRowOutputStream.cpp
	src/DataStreams/TSKVRowOutputStream.cpp
	src/DataStreams/TSKVRowInputStream.cpp
	src/DataStreams/ODBCDriverBlockOutputStream.cpp
	src/DataStreams/JSONCompactRowOutputStream.cpp
	src/DataStreams/PrettyCompactMonoBlockOutputStream.cpp
	src/DataStreams/CSVRowOutputStream.cpp
	src/DataStreams/CSVRowInputStream.cpp
	src/DataStreams/SummingSortedBlockInputStream.cpp
	src/DataStreams/ReplacingSortedBlockInputStream.cpp
	src/DataStreams/GraphiteRollupSortedBlockInputStream.cpp
	src/DataStreams/TotalsHavingBlockInputStream.cpp
	src/DataStreams/CreatingSetsBlockInputStream.cpp
	src/DataStreams/DistinctBlockInputStream.cpp
	src/DataStreams/RemoteBlockInputStream.cpp
	src/DataStreams/BlockIO.cpp
	src/DataStreams/verbosePrintString.cpp
	src/DataStreams/SquashingTransform.cpp
	src/DataStreams/SquashingBlockInputStream.cpp
	src/DataStreams/SquashingBlockOutputStream.cpp

	src/DataTypes/DataTypeString.cpp
	src/DataTypes/DataTypeFixedString.cpp
	src/DataTypes/DataTypeArray.cpp
	src/DataTypes/DataTypeNested.cpp
	src/DataTypes/DataTypeFactory.cpp
	src/DataTypes/DataTypeAggregateFunction.cpp
	src/DataTypes/DataTypeEnum.cpp
	src/DataTypes/DataTypeTuple.cpp
	src/DataTypes/FieldToDataType.cpp

	src/Dictionaries/MySQLDictionarySource.cpp
	src/Dictionaries/ODBCDictionarySource.cpp
	src/Dictionaries/writeParenthesisedString.cpp
	src/Dictionaries/DictionaryStructure.cpp
	src/Dictionaries/FlatDictionary.cpp
	src/Dictionaries/HashedDictionary.cpp
	src/Dictionaries/CacheDictionary.cpp
	src/Dictionaries/RangeHashedDictionary.cpp
	src/Dictionaries/ComplexKeyHashedDictionary.cpp
	src/Dictionaries/ComplexKeyCacheDictionary.cpp

	src/Parsers/ASTSelectQuery.cpp
	src/Parsers/ASTAlterQuery.cpp
	src/Parsers/ASTLiteral.cpp
	src/Parsers/ASTFunction.cpp
	src/Parsers/ASTWithAlias.cpp
	src/Parsers/ASTIdentifier.cpp
	src/Parsers/ASTSampleRatio.cpp
	src/Parsers/ASTTablesInSelectQuery.cpp
	src/Parsers/IAST.cpp
	src/Parsers/IParserBase.cpp
	src/Parsers/ExpressionElementParsers.cpp
	src/Parsers/ExpressionListParsers.cpp
	src/Parsers/ParserQueryWithOutput.cpp
	src/Parsers/ParserCreateQuery.cpp
	src/Parsers/ParserSelectQuery.cpp
	src/Parsers/ParserInsertQuery.cpp
	src/Parsers/ParserDropQuery.cpp
	src/Parsers/ParserRenameQuery.cpp
	src/Parsers/ParserSetQuery.cpp
	src/Parsers/ParserShowTablesQuery.cpp
	src/Parsers/ParserOptimizeQuery.cpp
	src/Parsers/ParserTablePropertiesQuery.cpp
	src/Parsers/ParserQuery.cpp
	src/Parsers/ParserAlterQuery.cpp
	src/Parsers/ParserCheckQuery.cpp
	src/Parsers/ParserSampleRatio.cpp
	src/Parsers/ParserCase.cpp
	src/Parsers/ParserTablesInSelectQuery.cpp
	src/Parsers/formatAST.cpp
	src/Parsers/parseQuery.cpp
	src/Parsers/queryToString.cpp

	src/TableFunctions/TableFunctionFactory.cpp
	src/TableFunctions/TableFunctionMerge.cpp
	src/TableFunctions/TableFunctionRemote.cpp
	src/TableFunctions/TableFunctionShardByHash.cpp
	src/TableFunctions/getStructureOfRemoteTable.cpp

	src/Interpreters/ExpressionActions.cpp
	src/Interpreters/ExpressionAnalyzer.cpp
	src/Interpreters/LogicalExpressionsOptimizer.cpp
	src/Interpreters/Context.cpp
	src/Interpreters/InterpreterAlterQuery.cpp
	src/Interpreters/InterpreterCheckQuery.cpp
	src/Interpreters/InterpreterCreateQuery.cpp
	src/Interpreters/InterpreterSelectQuery.cpp
	src/Interpreters/InterpreterInsertQuery.cpp
	src/Interpreters/InterpreterDropQuery.cpp
	src/Interpreters/InterpreterRenameQuery.cpp
	src/Interpreters/InterpreterShowTablesQuery.cpp
	src/Interpreters/InterpreterFactory.cpp
	src/Interpreters/Aggregator.cpp
	src/Interpreters/executeQuery.cpp
	src/Interpreters/loadMetadata.cpp
	src/Interpreters/sortBlock.cpp
	src/Interpreters/evaluateMissingDefaults.cpp
	src/Interpreters/evaluateConstantExpression.cpp
	src/Interpreters/convertFieldToType.cpp
	src/Interpreters/reinterpretAsIdentifier.cpp
	src/Interpreters/Set.cpp
	src/Interpreters/Join.cpp
	src/Interpreters/Quota.cpp
	src/Interpreters/Cluster.cpp
	src/Interpreters/Settings.cpp
	src/Interpreters/Compiler.cpp
	src/Interpreters/ExternalDictionaries.cpp
	src/Interpreters/DictionaryFactory.cpp
	src/Interpreters/ProcessList.cpp
	src/Interpreters/QueryLog.cpp
	src/Interpreters/getClusterName.cpp
	src/Interpreters/ClusterProxy/SelectQueryConstructor.cpp
	src/Interpreters/ClusterProxy/DescribeQueryConstructor.cpp
	src/Interpreters/ClusterProxy/AlterQueryConstructor.cpp
	src/Interpreters/ClusterProxy/Query.cpp

	src/Functions/FunctionFactory.cpp
	src/Functions/FunctionsArithmetic.cpp
	src/Functions/FunctionsArray.cpp
	src/Functions/FunctionsCoding.cpp
	src/Functions/FunctionsComparison.cpp
	src/Functions/FunctionsConditional.cpp
	src/Functions/FunctionsConversion.cpp
	src/Functions/FunctionsDateTime.cpp
	src/Functions/FunctionsDictionaries.cpp
	src/Functions/FunctionsFormatting.cpp
	src/Functions/FunctionsHashing.cpp
	src/Functions/FunctionsHigherOrder.cpp
	src/Functions/FunctionsLogical.cpp
	src/Functions/FunctionsRandom.cpp
	src/Functions/FunctionsReinterpret.cpp
	src/Functions/FunctionsRound.cpp
	src/Functions/FunctionsString.cpp
	src/Functions/FunctionsStringArray.cpp
	src/Functions/FunctionsStringSearch.cpp
	src/Functions/FunctionsURL.cpp
	src/Functions/FunctionsVisitParam.cpp
	src/Functions/FunctionsMath.cpp
	src/Functions/FunctionsMiscellaneous.cpp
	src/Functions/FunctionsTransform.cpp
	src/Functions/Conditional/getArrayType.cpp
	src/Functions/Conditional/ArgsInfo.cpp
	src/Functions/Conditional/CondSource.cpp
	src/Functions/Conditional/NumericPerformer.cpp
	src/Functions/Conditional/StringEvaluator.cpp
	src/Functions/Conditional/StringArrayEvaluator.cpp

	src/AggregateFunctions/UniqCombinedBiasData.cpp
	src/AggregateFunctions/AggregateFunctionFactory.cpp
	src/AggregateFunctions/AggregateFunctionArray.cpp
	src/AggregateFunctions/AggregateFunctionAvg.cpp
	src/AggregateFunctions/AggregateFunctionCount.cpp
	src/AggregateFunctions/AggregateFunctionGroupArray.cpp
	src/AggregateFunctions/AggregateFunctionGroupUniqArray.cpp
	src/AggregateFunctions/AggregateFunctionIf.cpp
	src/AggregateFunctions/AggregateFunctionMerge.cpp
	src/AggregateFunctions/AggregateFunctionsQuantile.cpp
	src/AggregateFunctions/AggregateFunctionQuantileExact.cpp
	src/AggregateFunctions/AggregateFunctionQuantileExactWeighted.cpp
	src/AggregateFunctions/AggregateFunctionsQuantileDeterministic.cpp
	src/AggregateFunctions/AggregateFunctionsQuantileTiming.cpp
	src/AggregateFunctions/AggregateFunctionsQuantileTDigest.cpp
	src/AggregateFunctions/AggregateFunctionsSequenceMatch.cpp
	src/AggregateFunctions/AggregateFunctionsMinMaxAny.cpp
	src/AggregateFunctions/AggregateFunctionsStatistics.cpp
	src/AggregateFunctions/AggregateFunctionState.cpp
	src/AggregateFunctions/AggregateFunctionSum.cpp
	src/AggregateFunctions/AggregateFunctionsUniq.cpp
	src/AggregateFunctions/AggregateFunctionUniqUpTo.cpp
	src/AggregateFunctions/AggregateFunctionDebug.cpp

	src/Databases/DatabaseOrdinary.cpp
	src/Databases/DatabaseFactory.cpp
	src/Databases/DatabasesCommon.cpp

	src/Client/Connection.cpp
	src/Client/MultiplexedConnections.cpp
)

# Не генерируем отладочную информацию для файлов с большим количеством инстанцирований шаблонов
# - для более быстрой линковки и меньшего размера бинарника.
file(GLOB FUNCTION_SOURCES   LIST_DIRECTORIES FALSE RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} src/Functions/Functions*.cpp)
file(GLOB DICTIONARY_SOURCES LIST_DIRECTORIES FALSE RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} src/Dictionaries/*Dictionary.cpp)
set_source_files_properties(
    ${FUNCTION_SOURCES}
    ${DICTIONARY_SOURCES}
    PROPERTIES
    COMPILE_FLAGS -g0)

target_link_libraries(dbms
    PUBLIC

	common
	zkutil
	mysqlxx
	cityhash farmhash metrohash
	lz4 zstd
	double-conversion
	re2 re2_st
	crypto
	Boost::thread
	Boost::system
	Boost::regex
	PocoData
	PocoDataODBC

        mongodb_client
        $<$<STREQUAL:${CMAKE_SYSTEM_PROCESSOR},x86_64>:cpuid>

	dl ltdl)
